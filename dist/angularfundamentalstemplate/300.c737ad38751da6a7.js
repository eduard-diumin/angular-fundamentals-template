"use strict";(self.webpackChunkangularfundamentalstemplate=self.webpackChunkangularfundamentalstemplate||[]).push([[300],{1300:(M,p,i)=>{i.r(p),i.d(p,{CourseFormModule:()=>x});var a=i(6895),r=i(433),c=i(3841),h=i(9625),m=i(2687),t=i(1571),g=i(2216),f=i(7271),C=i(42);function _(s,u){1&s&&(t.TgZ(0,"span",23),t._uU(1,"Title is required."),t.qZA())}function F(s,u){1&s&&(t.TgZ(0,"span",24),t._uU(1,"Description is required."),t.qZA())}function A(s,u){if(1&s){const e=t.EpF();t.TgZ(0,"div",25)(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"app-button",26),t.NdJ("click",function(){const n=t.CHM(e),l=n.$implicit,d=n.index,b=t.oxw();return t.KtG(b.removeAuthorFromCourse(l.value,d))}),t._uU(4,"Remove"),t.qZA()()}if(2&s){const e=u.$implicit;t.Q6J("formGroupName",u.index),t.xp6(2),t.Oqu(e.value.name)}}function Z(s,u){1&s&&(t.TgZ(0,"span",27),t._uU(1,"Duration is required."),t.qZA())}const v=[{path:"",component:(()=>{class s{constructor(e,o,n,l,d){this.fb=e,this.library=o,this.route=n,this.router=l,this.coursesStateFacade=d,this.submitted=!1,this.allAuthors=[],this.courseAuthors=[],this.isEditMode=!1,this.courseId=null,o.addIconPacks(m.mRB),this.authors$=this.coursesStateFacade.getAllAuthors(),this.isLoading$=this.coursesStateFacade.isAllCoursesLoading$,this.courseForm=this.fb.group({title:["",[r.kI.required,r.kI.minLength(2)]],description:["",[r.kI.required,r.kI.minLength(2)]],duration:[0,[r.kI.required,r.kI.min(0)]],authors:this.fb.array([]),author:["",[r.kI.required,r.kI.minLength(2),r.kI.pattern("^[a-zA-Z0-9]+$")]]})}ngOnInit(){this.authors$.subscribe(e=>{this.allAuthors=e}),this.courseId=this.route.snapshot.params.id,this.isEditMode=!!this.courseId,this.isEditMode&&this.courseId&&(this.coursesStateFacade.getSingleCourse(this.courseId),this.loadCourse())}loadCourse(){this.coursesStateFacade.course$.subscribe(e=>{e&&(this.courseForm.patchValue({title:e.title,description:e.description,duration:e.duration}),this.courseAuthors=e.authors.map(o=>this.allAuthors.find(n=>n.id===o)).filter(o=>void 0!==o),this.authors.clear(),this.courseAuthors.forEach(o=>{this.authors.push(new r.NI(o))}),this.allAuthors=this.allAuthors.filter(o=>!this.courseAuthors.some(n=>n.id===o.id)))})}get authors(){return this.courseForm.get("authors")}get newAuthorGroup(){return this.courseForm.get("newAuthor")}addAuthorToCourse(e){this.courseAuthors.push(e),this.authors.push(new r.NI(e)),this.allAuthors=this.allAuthors.filter(o=>o.id!==e.id)}removeAuthorFromCourse(e,o){this.allAuthors.push(e),this.courseAuthors=this.courseAuthors.filter(n=>n.id!==e.id),this.authors.removeAt(o)}createAuthor(){const e=this.courseForm.get("author"),o=e?.value;e?.valid&&this.coursesStateFacade.createAuthor(o).subscribe(n=>{this.allAuthors.push(n),e.reset()})}onSubmit(){if(this.submitted=!0,this.courseForm.valid&&this.courseAuthors.length>0){const e={title:this.courseForm.value.title,description:this.courseForm.value.description,duration:this.courseForm.value.duration,authors:this.courseAuthors.map(o=>o.id)};this.isEditMode&&this.courseId?this.coursesStateFacade.editCourse(e,this.courseId):this.coursesStateFacade.createCourse(e)}}onCancel(){this.router.navigate(["/courses"])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.qu),t.Y36(g.by),t.Y36(c.gz),t.Y36(c.F0),t.Y36(f.m))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-course-form"]],decls:44,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"app-plate"],[1,"course"],[1,"form__control"],["for","title"],["type","text","id","title","placeholder","Input text","required","","formControlName","title"],["id","titleErrorMessage","class","text-danger",4,"ngIf"],["for","description"],["id","description","name","description","placeholder","Input text","rows","4","cols","5","formControlName","description","required",""],["id","descriptionErrorMessage","class","text-danger",4,"ngIf"],[1,"separator"],[1,"course__flex"],["type","text","id","author","placeholder","Input Author Name","formControlName","author"],["id","createAuthor",3,"click"],["id","authorErrorMessage"],[1,"course__authors"],["formArrayName","authors"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","number","id","duration","placeholder","Input duration","formControlName","duration","required",""],[1,"course__duration"],["id","durationErrorMessage","class","text-danger",4,"ngIf"],[1,"form__action"],[3,"buttonText","click"],["id","titleErrorMessage",1,"text-danger"],["id","descriptionErrorMessage",1,"text-danger"],[3,"formGroupName"],[3,"click"],["id","durationErrorMessage",1,"text-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Create / Edit Course"),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",1)(4,"div",2)(5,"h3"),t._uU(6,"Main Info"),t.qZA(),t.TgZ(7,"div",3)(8,"label",4),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",5),t.YNc(11,_,2,0,"span",6),t.qZA(),t.TgZ(12,"div",3)(13,"label",7),t._uU(14,"Description"),t.qZA(),t._UZ(15,"textarea",8),t.YNc(16,F,2,0,"span",9),t.qZA(),t._UZ(17,"div",10),t.TgZ(18,"h3"),t._uU(19,"Authors"),t.qZA(),t.TgZ(20,"div",3)(21,"div",11),t._UZ(22,"input",12),t.TgZ(23,"app-button",13),t.NdJ("click",function(){return o.createAuthor()}),t._uU(24,"Create Author"),t.qZA()(),t.TgZ(25,"span",14),t._uU(26,"New author should contain only latin letters and numbers."),t.qZA(),t.TgZ(27,"div",15)(28,"h4"),t._uU(29,"All Authors"),t.qZA(),t.ynx(30,16),t.YNc(31,A,5,2,"div",17),t.BQk(),t.qZA()(),t._UZ(32,"div",10),t.TgZ(33,"h3"),t._uU(34,"Duration"),t.qZA(),t.TgZ(35,"div",3)(36,"div",11),t._UZ(37,"input",18),t.TgZ(38,"div",19),t._uU(39),t.qZA()(),t.YNc(40,Z,2,0,"span",20),t.qZA(),t.TgZ(41,"div",21)(42,"app-button",22),t.NdJ("click",function(){return o.onSubmit()}),t.qZA(),t.TgZ(43,"app-button",22),t.NdJ("click",function(){return o.onCancel()}),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.courseForm),t.xp6(9),t.Q6J("ngIf",(o.submitted||o.courseForm.controls.title.touched)&&(null==o.courseForm.controls.title.errors?null:o.courseForm.controls.title.errors.required)),t.xp6(5),t.Q6J("ngIf",(o.submitted||o.courseForm.controls.description.touched)&&(null==o.courseForm.controls.description.errors?null:o.courseForm.controls.description.errors.required)),t.xp6(15),t.Q6J("ngForOf",o.authors.controls),t.xp6(8),t.hij(" ",o.courseForm.controls.duration.value," hours "),t.xp6(1),t.Q6J("ngIf",(o.submitted||o.courseForm.controls.duration.touched)&&(null==o.courseForm.controls.duration.errors?null:o.courseForm.controls.duration.errors.required)),t.xp6(2),t.Q6J("buttonText",o.isEditMode?"Update Course":"Create Course"),t.xp6(1),t.Q6J("buttonText","Cancel"))},dependencies:[a.sg,a.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE,C.r],styles:[".app-plate[_ngcontent-%COMP%]{width:100%;min-height:477px;background-color:#fff;border:1px solid #CFCFCF;border-radius:4px;padding:32px;display:flex;justify-content:center}.text-align-center[_ngcontent-%COMP%]{text-align:center}.app-error-text[_ngcontent-%COMP%]{color:red;position:absolute;margin-top:4px}.form__control[_ngcontent-%COMP%]{margin-bottom:24px}.form__action[_ngcontent-%COMP%]{margin-top:54px}.form__text[_ngcontent-%COMP%]{text-align:center;margin-top:38px;flex-wrap:wrap}.separator[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #CFCFCF}.text-danger[_ngcontent-%COMP%]{color:red}.course[_ngcontent-%COMP%]{min-width:60vw}.course__flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.course__flex[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.course__flex[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-left:16px}.course__flex[_ngcontent-%COMP%]   .course__duration[_ngcontent-%COMP%]{margin-left:16px}.course__authors[_ngcontent-%COMP%]{margin-top:8px;display:flex}.course__authors-item[_ngcontent-%COMP%]{margin-right:10px}.course__icon[_ngcontent-%COMP%]{margin-left:4px;cursor:pointer}"]}),s})()}];let x=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[a.ez,r.UX,h.m,c.Bz.forChild(v)]}),s})()}}]);